version: 2
jobs:
  build:
    working_directory: ~/future-web/examples/todo
    docker:
      - image: circleci/openjdk:8-jdk-browsers
        environment:
          # lang settings required for Meteor's Mongo
          LANG: C.UTF-8
          LANGUAGE: C.UTF-8
          LC_ALL: C.UTF-8
          LC_NUMERIC: en_US.UTF-8
    steps:
      - checkout:
          path: ~/future-web
      - run:
          name: install Meteor
          command: |
            # only install meteor if bin isn't found
            command -v meteor >/dev/null 2>&1 || curl https://install.meteor.com | /bin/sh
      - run:
          name: install npm packages
          command: meteor npm i
      - run:
          name: code linting
          command: meteor npm run style